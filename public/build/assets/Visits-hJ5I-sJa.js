import{d as xe,l as a,T as ye,i as W,q as be,g as d,a as u,u as i,w as P,F as B,o as r,Z as we,b as e,j as q,s as ke,x as U,n as I,h as x,y as E,c as Ce,e as c,t as n,f as X}from"./app-DzzPBsIt.js";import{_ as Ve}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-C10Q_aY_.js";import{_ as z,a as L,P as ee,D as Se}from"./DeleteConfirmatiomModal-gRF518rY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Me=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Guest Manager",-1),He={class:"py-12"},$e={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},De={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},Ne={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},je={class:"flex flex-wrap items-center justify-between pb-4 space-y-4 bg-white flex-column md:flex-row md:space-y-0"},Ae={class:"mt-4 ml-5"},Pe=e("div",{class:"pr-1"},"Add",-1),Be=e("svg",{class:"w-3 h-3 mb-1 text-white me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 16"},[e("path",{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"})],-1),qe=[Pe,Be],Ie={class:"fixed inset-0 bg-black bg-opacity-50"},ze={class:"relative w-full max-w-2xl max-h-full p-4"},Le={class:"relative bg-white rounded-lg shadow"},Fe={class:"flex items-center justify-between p-4 border-b rounded-t md:p-5"},Te={key:0,class:"text-xl font-semibold text-gray-900"},Ue={key:1,class:"text-xl font-semibold text-gray-900"},Ee=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Oe=e("span",{class:"sr-only"},"Close modal",-1),Qe=[Ee,Oe],Ye={class:"p-4 space-y-4 md:p-5"},Ze={class:"max-w-sm mx-auto"},Ge={class:"mb-5"},Je={class:"relative"},Ke={key:0,class:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg"},Re=["onClick"],We={class:"mb-5"},Xe={class:"relative"},et={key:0,class:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg"},tt=["onClick"],st={class:"mb-5"},ot={class:"mb-5"},lt={class:"flex items-center justify-center p-4 border-t border-gray-200 rounded-b md:p-5"},at={class:"w-full text-sm text-left text-gray-500 rtl:text-right"},nt=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"p-4"},[e("div",{class:"flex items-center"})]),e("th",{scope:"col",class:"px-6 py-3"}," Visitor Name "),e("th",{scope:"col",class:"px-6 py-3"}," Staff Name "),e("th",{scope:"col",class:"px-6 py-3"}," Check In At "),e("th",{scope:"col",class:"px-6 py-3"}," Check Out At "),e("th",{scope:"col",class:"px-6 py-3"}," Purpose "),e("th",{scope:"col",class:"px-6 py-3"}," Status "),e("th",{scope:"col",class:"px-6 py-3"}," Action ")])],-1),it=["onClick"],rt=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"})],-1),dt={class:"px-6 py-4"},ut={class:"px-6 py-4"},ct={class:"px-6 py-4"},ht={class:"px-6 py-4"},mt={class:"px-6 py-4"},pt={class:"px-6 py-4"},vt={class:"px-6 py-4"},_t=["onClick"],ft=["onClick"],gt={class:"flex flex-wrap items-center justify-center p-4 space-y-4 bg-white flex-column md:flex-row md:space-y-0"},xt=["disabled"],yt=["disabled"],bt={class:"fixed inset-0 bg-black bg-opacity-50"},wt={class:"relative w-full max-w-md max-h-full p-4"},kt={class:"relative bg-white rounded-lg shadow"},Ct=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Vt=e("span",{class:"sr-only"},"Close modal",-1),St=[Ct,Vt],Mt={class:"w-full text-sm text-left rounded gray-500 rtl:text-right"},Ht=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",{class:"divide-x divide-slate-700"},[e("th",{scope:"col",class:"px-6 py-3"}," Visitor details "),e("th",{scope:"col",class:"px-6 py-3"}," Staff Details ")])],-1),$t={key:0,class:"bg-white border-b divide-x divide-slate-700 hover:bg-gray-50"},Dt={class:"px-6 py-4"},Nt=e("span",null,"Visitor Name:",-1),jt=e("span",null,"Visitor Email:",-1),At=e("span",null,"Visitor Company:",-1),Pt=e("span",null,"Visitor Phone:",-1),Bt={class:"px-6 py-4"},qt=e("span",null,"Host Name:",-1),It=e("span",null,"Host Email:",-1),zt=e("span",null,"Host Phone:",-1),Lt=e("span",null,"Host Position:",-1),Ft=e("span",null,"Host Department:",-1),Qt=xe({__name:"Visits",props:{visits:{type:Array,default:()=>[]},visitorNames:{type:Array,default:()=>[]},hostNames:{type:Array,default:()=>[]},allVisitors:{type:Array,default:()=>[]},allHosts:{type:Array,default:()=>[]}},setup(te){const h=te,se=a("Are you sure you want to delete this Host?"),oe=a("Yes, I'm sure"),le=a("No, cancel"),y=a(null),v=a(null);a(null);const b=a(!1),_=a(1),F=a(2),w=a([]),f=a([...h.visits]);console.log(f.value.length);const k=a([]),C=a(!1),V=a(!1),T=a(""),m=a(!1),g=a(!1),S=a(!1),M=a(""),l=ye({visit_id:0,visitor_name:"",host_name:"",purpose:"",status:"",searchQuery:"",check_in_time:"",check_out_time:""}),ae=()=>{const s=l.visitor_name.toLowerCase();s.length>0?(w.value=h.visitorNames.filter(t=>t.full_name.toLowerCase().includes(s)),C.value=w.value.length>0):C.value=!1,console.log(w.value)},ne=()=>{const s=l.host_name.toLowerCase();s.length>0?(k.value=h.hostNames.filter(t=>t.host_name.toLowerCase().includes(s)),V.value=k.value.length>0):V.value=!1,console.log(k.value)},ie=s=>{l.visitor_name=s.full_name,C.value=!1},re=s=>{l.host_name=s.host_name,V.value=!1},de=s=>{y.value=h.allVisitors.find(t=>t.full_name===s.visitor_name)||null,v.value=h.allHosts.find(t=>t.host_name===s.host_name)||null,b.value=!0},ue=()=>{b.value=!1,console.log("hideDetais")};new Date().toISOString();const ce=()=>{const s=M.value;console.log(M.value),l.delete(route("visits.destroy",{visit:s}),{onFinish:()=>{S.value=!1}})},he=s=>{M.value=String(s.visit_id),S.value=!0},me=()=>{S.value=!1},pe=()=>{l.post(route("visits.store"),{onFinish:()=>{m.value=!1}})},ve=()=>{l.patch(route("visits.update",{visit:l.visit_id}),{onFinish:()=>{l.reset(),m.value=!1}})},_e=s=>{m.value=!1,O(),g.value=!0,l.visit_id=s.visit_id,l.visitor_name=s.visitor_name,l.host_name=s.host_name,l.purpose=s.purpose,l.status=s.status,m.value=!0},O=()=>{l.visitor_name="",l.host_name="",l.purpose="",l.status=""},fe=()=>{m.value=!1,O(),m.value=!0},Q=()=>{m.value=!1,g.value=!1};function Y(s){const t=new Date(s),p=t.getFullYear(),H=String(t.getMonth()+1).padStart(2,"0"),$=String(t.getDate()).padStart(2,"0"),D=String(t.getHours()).padStart(2,"0"),N=String(t.getMinutes()).padStart(2,"0"),j=String(t.getSeconds()).padStart(2,"0");return`${p}-${H}-${$} ${D}:${N}:${j}`}const Z=()=>{const s=T.value.toLowerCase();s.length>0?f.value=h.visits.filter(t=>Object.values(t).some(p=>p&&p.toString().toLowerCase().includes(s))):f.value=[...h.visits],console.log(f.value),console.log(h.visits)},ge=W(()=>{const s=(_.value-1)*F.value,t=s+F.value;return f.value.slice(s,t)}),G=W(()=>Math.ceil(f.value.length/F.value));return be(()=>h.visits,s=>{Z()}),(s,t)=>(r(),d(B,null,[u(i(we),{title:"Dashboard"}),u(Ve,null,{header:P(()=>[Me]),default:P(()=>{var p,H,$,D,N,j,J,K,R;return[e("div",He,[e("div",$e,[e("div",De,[e("div",Ne,[e("div",je,[e("div",Ae,[e("button",{onClick:fe,"data-modal-target":"static-modal","data-modal-toggle":"static-modal",class:"inline-flex items-center px-3 py-2 pl-4 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300",type:"button"},qe),q(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>T.value=o),onInput:Z,placeholder:"Search...",class:"search-input rounded-lg ml-20"},null,544),[[ke,T.value]]),q(e("div",Ie,null,512),[[U,m.value]]),e("div",{class:I([{hidden:!m.value},"flex overflow-y-auto overflow-x-hidden fixed top-1/2 right-1/2 left-1/2 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"]),id:"static-modal","data-modal-backdrop":"static",tabindex:"-1","aria-hidden":"true"},[e("div",ze,[e("div",Le,[e("div",Fe,[g.value?x("",!0):(r(),d("h3",Te,"Add Visit")),g.value?(r(),d("h3",Ue,"Edit Visit")):x("",!0),e("button",{onClick:Q,type:"button",class:"inline-flex items-center justify-center w-8 h-8 text-sm text-gray-400 bg-transparent rounded-lg hover:bg-gray-200 hover:text-gray-900 ms-auto","data-modal-hide":"static-modal"},Qe)]),e("div",Ye,[e("form",Ze,[e("div",Ge,[u(z,{for:"visitor_name",value:"Visitor Name"}),e("div",Je,[u(L,{id:"visitor_name",type:"text",modelValue:i(l).visitor_name,"onUpdate:modelValue":t[1]||(t[1]=o=>i(l).visitor_name=o),onInput:t[2]||(t[2]=o=>ae()),required:"",autocomplete:"off"},null,8,["modelValue"]),C.value&&w.value.length?(r(),d("div",Ke,[e("ul",null,[(r(!0),d(B,null,E(w.value,o=>(r(),d("li",{key:o.id,class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:A=>ie(o)},n(o.full_name),9,Re))),128))])])):x("",!0)])]),e("div",We,[u(z,{for:"host_name",value:"Staff Name"}),e("div",Xe,[u(L,{id:"host_name",type:"text",modelValue:i(l).host_name,"onUpdate:modelValue":t[3]||(t[3]=o=>i(l).host_name=o),onInput:t[4]||(t[4]=o=>ne()),required:"",autocomplete:"off"},null,8,["modelValue"]),V.value&&k.value.length?(r(),d("div",et,[e("ul",null,[(r(!0),d(B,null,E(k.value,o=>(r(),d("li",{key:o.host_id,class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:A=>re(o)},n(o.host_name),9,tt))),128))])])):x("",!0)])]),e("div",st,[u(z,{for:"name",value:"Purpose"}),u(L,{id:"purpose",type:"text",modelValue:i(l).purpose,"onUpdate:modelValue":t[5]||(t[5]=o=>i(l).purpose=o),required:"",autofocus:"",placeholder:"Sales",autocomplete:"off"},null,8,["modelValue"])]),e("div",ot,[u(z,{for:"name",value:"Status"}),u(L,{id:"status",type:"text",modelValue:i(l).status,"onUpdate:modelValue":t[6]||(t[6]=o=>i(l).status=o),required:"",autofocus:"",placeholder:"Sales",autocomplete:"off"},null,8,["modelValue"])])])]),e("div",lt,[g.value?x("",!0):(r(),Ce(ee,{key:0,onClick:pe,class:I(["text-center",{"opacity-25":i(l).processing}]),disabled:i(l).processing},{default:P(()=>[c(" Create ")]),_:1},8,["class","disabled"])),q(u(ee,{onClick:ve,class:I(["text-center",{"opacity-25":i(l).processing}]),disabled:i(l).processing},{default:P(()=>[c(" Update ")]),_:1},8,["class","disabled"]),[[U,g.value]]),e("button",{onClick:Q,type:"button",class:"ms-3 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"},"Cancel")])])])],2),e("div",null,[u(Se,{"show-modal":S.value,message:se.value,"confirm-button-text":oe.value,"cancel-button-text":le.value,"confirm-action":ce,"close-modal":me},null,8,["show-modal","message","confirm-button-text","cancel-button-text"])])])]),e("table",at,[nt,e("tbody",null,[(r(!0),d(B,null,E(ge.value,o=>(r(),d("tr",{key:o.visit_id,class:"bg-white border-b hover:bg-gray-50",onClick:A=>de(o)},[rt,e("td",dt,n(o.visitor_name),1),e("td",ut,n(o.host_name),1),e("td",ct,n(Y(o.check_in_time)),1),e("td",ht,n(Y(o.check_out_time)),1),e("td",mt,n(o.purpose),1),e("td",pt,n(o.status),1),e("td",vt,[e("a",{href:"#",onClick:X(A=>_e(o),["stop"]),class:"font-medium text-blue-600 hover:underline"},"Edit",8,_t),c(" / "),e("a",{href:"#",onClick:X(A=>(he(o),console.log(M.value.valueOf)),["stop"]),class:"font-medium text-red-600 hover:underline"},"Delete",8,ft)])],8,it))),128))])]),e("div",gt,[e("button",{disabled:_.value===1,onClick:t[7]||(t[7]=o=>_.value--),class:"inline-flex items-center mr-3 px-3 py-1 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-2"}," Prev ",8,xt),e("span",null,"Page "+n(_.value)+" of "+n(G.value),1),e("button",{disabled:_.value===G.value,onClick:t[8]||(t[8]=o=>_.value++),class:"inline-flex items-center ml-3 px-3 py-1 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-2"}," Next ",8,yt)]),q(e("div",bt,null,512),[[U,b.value]]),e("div",{class:I([{hidden:!b.value},"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full flex"]),"aria-modal":"true",role:"dialog"},[e("div",wt,[e("div",kt,[e("button",{onClick:ue,type:"button",class:"absolute inline-flex items-center justify-center w-8 h-8 text-sm text-gray-400 bg-transparent rounded-lg top-1 right-1 hover:bg-gray-200 hover:text-gray-900 ms-auto dark:hover:bg-gray-600 dark:hover:text-white"},St),e("table",Mt,[Ht,e("tbody",null,[b.value?(r(),d("tr",$t,[e("td",Dt,[e("div",null,[Nt,c(" "+n((p=y.value)==null?void 0:p.full_name),1)]),e("div",null,[jt,c(" "+n((H=y.value)==null?void 0:H.email),1)]),e("div",null,[At,c(" "+n(($=y.value)==null?void 0:$.company),1)]),e("div",null,[Pt,c(" "+n((D=y.value)==null?void 0:D.phone_number),1)])]),e("td",Bt,[e("div",null,[qt,c(" "+n((N=v.value)==null?void 0:N.host_name),1)]),e("div",null,[It,c(" "+n((j=v.value)==null?void 0:j.host_email),1)]),e("div",null,[zt,c(" "+n((J=v.value)==null?void 0:J.host_phone),1)]),e("div",null,[Lt,c(" "+n((K=v.value)==null?void 0:K.host_position),1)]),e("div",null,[Ft,c(" "+n((R=v.value)==null?void 0:R.host_department),1)])])])):x("",!0)])])])])],2)])])])])]}),_:1})],64))}});export{Qt as default};
