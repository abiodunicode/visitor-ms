import{d as ce,l as d,T as ue,g as c,a as i,u as a,w as N,F as D,o as r,Z as me,b as e,j as A,m as j,n as S,h as p,p as B,c as he,e as u,t as n,f as Y}from"./app-D0CuMqhc.js";import{_ as _e}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CjHReTry.js";import{_ as v,a as f,P as G,D as pe}from"./DeleteConfirmatiomModal-BAX8ruMK.js";import"./ApplicationLogo-BuUYKi6c.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ve=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Dashboard",-1),fe={class:"py-12"},xe={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ge={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},ye={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},be={class:"flex flex-wrap items-center justify-between pb-4 space-y-4 bg-white flex-column md:flex-row md:space-y-0"},we={class:"mt-4 ml-5"},ke=e("div",{class:"pr-1"},"Add",-1),Ve=e("svg",{class:"w-3 h-3 mb-1 text-white me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 16"},[e("path",{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"})],-1),Ce=[ke,Ve],He={class:"fixed inset-0 bg-black bg-opacity-50"},Me={class:"relative w-full max-w-2xl max-h-full p-4"},Ne={class:"relative bg-white rounded-lg shadow"},De={class:"flex items-center justify-between p-4 border-b rounded-t md:p-5"},Se={key:0,class:"text-xl font-semibold text-gray-900"},Ae={key:1,class:"text-xl font-semibold text-gray-900"},je=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Be=e("span",{class:"sr-only"},"Close modal",-1),$e=[je,Be],qe={class:"p-4 space-y-4 md:p-5"},Pe={class:"max-w-sm mx-auto"},Ue={class:"mb-5"},ze={class:"relative"},Ie={key:0,class:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg"},Ee=["onClick"],Fe={class:"mb-5"},Le={class:"relative"},Te={key:0,class:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg"},Oe=["onClick"],Ze={class:"mb-5"},Ye={class:"mb-5"},Ge={class:"mb-5"},Je={class:"mb-5"},Ke={class:"flex items-center justify-center p-4 border-t border-gray-200 rounded-b md:p-5"},Qe={class:"w-full text-sm text-left text-gray-500 rtl:text-right"},Re=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"p-4"},[e("div",{class:"flex items-center"})]),e("th",{scope:"col",class:"px-6 py-3"}," Visitor Name "),e("th",{scope:"col",class:"px-6 py-3"}," Staff Name "),e("th",{scope:"col",class:"px-6 py-3"}," Check In At "),e("th",{scope:"col",class:"px-6 py-3"}," Check Out At "),e("th",{scope:"col",class:"px-6 py-3"}," Purpose "),e("th",{scope:"col",class:"px-6 py-3"}," Status "),e("th",{scope:"col",class:"px-6 py-3"}," Action ")])],-1),We=["onClick"],Xe=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"})],-1),et={class:"px-6 py-4"},tt={class:"px-6 py-4"},st={class:"px-6 py-4"},ot={class:"px-6 py-4"},lt={class:"px-6 py-4"},at={class:"px-6 py-4"},nt={class:"px-6 py-4"},it=["onClick"],dt=["onClick"],rt={class:"fixed inset-0 bg-black bg-opacity-50"},ct={class:"relative w-full max-w-md max-h-full p-4"},ut={class:"relative bg-white rounded-lg shadow"},mt=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),ht=e("span",{class:"sr-only"},"Close modal",-1),_t=[mt,ht],pt={class:"w-full text-sm text-left rounded gray-500 rtl:text-right"},vt=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",{class:"divide-x divide-slate-700"},[e("th",{scope:"col",class:"px-6 py-3"}," Visitor details "),e("th",{scope:"col",class:"px-6 py-3"}," Staff Details ")])],-1),ft={key:0,class:"bg-white border-b divide-x divide-slate-700 hover:bg-gray-50"},xt={class:"px-6 py-4"},gt=e("span",null,"Visitor Name:",-1),yt=e("span",null,"Visitor Email:",-1),bt=e("span",null,"Visitor Company:",-1),wt=e("span",null,"Visitor Phone:",-1),kt={class:"px-6 py-4"},Vt=e("span",null,"Host Name:",-1),Ct=e("span",null,"Host Email:",-1),Ht=e("span",null,"Host Phone:",-1),Mt=e("span",null,"Host Position:",-1),Nt=e("span",null,"Host Department:",-1),$t=ce({__name:"Visits",props:{visits:Array,visitorNames:{type:Array,default:()=>[]},hostNames:{type:Array,default:()=>[]},allVisitors:{type:Array,default:()=>[]},allHosts:{type:Array,default:()=>[]}},setup($){const w=$,J=d("Are you sure you want to delete this Host?"),K=d("Yes, I'm sure"),Q=d("No, cancel"),x=d(null),h=d(null);d(null);const g=d(!1),y=d([]),b=d([]),k=d(!1),V=d(!1),m=d(!1),_=d(!1),C=d(!1),H=d(""),t=ue({visit_id:0,visitor_name:"",host_name:"",check_in_time:"",check_out_time:"",purpose:"",status:""}),R=()=>{const o=t.visitor_name.toLowerCase();o.length>0?(y.value=w.visitorNames.filter(l=>l.full_name.toLowerCase().includes(o)),k.value=y.value.length>0):k.value=!1,console.log(y.value)},W=()=>{const o=t.host_name.toLowerCase();o.length>0?(b.value=w.hostNames.filter(l=>l.host_name.toLowerCase().includes(o)),V.value=b.value.length>0):V.value=!1,console.log(b.value)},X=o=>{t.visitor_name=o.full_name,k.value=!1},ee=o=>{t.host_name=o.host_name,V.value=!1},te=o=>{x.value=w.allVisitors.find(l=>l.full_name===o.visitor_name)||null,h.value=w.allHosts.find(l=>l.host_name===o.host_name)||null,g.value=!0},se=()=>{g.value=!1,console.log("hideDetais")},oe=()=>{const o=H.value;console.log(H.value),t.delete(route("visits.destroy",{visit:o}),{onFinish:()=>{C.value=!1}})},le=o=>{H.value=String(o.visit_id),C.value=!0},ae=()=>{C.value=!1},ne=()=>{t.post(route("visits.store"),{onFinish:()=>{m.value=!1}})},ie=()=>{t.patch(route("visits.update",{visit:t.visit_id}),{onFinish:()=>{t.reset(),m.value=!1}})},de=o=>{m.value=!1,q(),_.value=!0,t.visit_id=o.visit_id,t.visitor_name=o.visitor_name,t.host_name=o.host_name,t.check_in_time=o.check_in_time,t.check_out_time=o.check_out_time,t.purpose=o.purpose,t.status=o.status,m.value=!0},q=()=>{t.visitor_name="",t.host_name="",t.check_in_time="",t.check_out_time="",t.purpose="",t.status=""},re=()=>{m.value=!1,q(),m.value=!0},P=()=>{m.value=!1,_.value=!1};return(o,l)=>(r(),c(D,null,[i(a(me),{title:"Dashboard"}),i(_e,null,{header:N(()=>[ve]),default:N(()=>{var U,z,I,E,F,L,T,O,Z;return[e("div",fe,[e("div",xe,[e("div",ge,[e("div",ye,[e("div",be,[e("div",we,[e("button",{onClick:re,"data-modal-target":"static-modal","data-modal-toggle":"static-modal",class:"inline-flex items-center px-3 py-2 pl-4 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300",type:"button"},Ce),A(e("div",He,null,512),[[j,m.value]]),e("div",{class:S([{hidden:!m.value},"flex overflow-y-auto overflow-x-hidden fixed top-1/2 right-1/2 left-1/2 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"]),id:"static-modal","data-modal-backdrop":"static",tabindex:"-1","aria-hidden":"true"},[e("div",Me,[e("div",Ne,[e("div",De,[_.value?p("",!0):(r(),c("h3",Se,"Add Visit")),_.value?(r(),c("h3",Ae,"Edit Visit")):p("",!0),e("button",{onClick:P,type:"button",class:"inline-flex items-center justify-center w-8 h-8 text-sm text-gray-400 bg-transparent rounded-lg hover:bg-gray-200 hover:text-gray-900 ms-auto","data-modal-hide":"static-modal"},$e)]),e("div",qe,[e("form",Pe,[e("div",Ue,[i(v,{for:"visitor_name",value:"Visitor Name"}),e("div",ze,[i(f,{id:"visitor_name",type:"text",modelValue:a(t).visitor_name,"onUpdate:modelValue":l[0]||(l[0]=s=>a(t).visitor_name=s),onInput:l[1]||(l[1]=s=>R()),required:"",autocomplete:"off"},null,8,["modelValue"]),k.value&&y.value.length?(r(),c("div",Ie,[e("ul",null,[(r(!0),c(D,null,B(y.value,s=>(r(),c("li",{key:s.id,class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:M=>X(s)},n(s.full_name),9,Ee))),128))])])):p("",!0)])]),e("div",Fe,[i(v,{for:"host_name",value:"Staff Name"}),e("div",Le,[i(f,{id:"host_name",type:"text",modelValue:a(t).host_name,"onUpdate:modelValue":l[2]||(l[2]=s=>a(t).host_name=s),onInput:l[3]||(l[3]=s=>W()),required:"",autocomplete:"off"},null,8,["modelValue"]),V.value&&b.value.length?(r(),c("div",Te,[e("ul",null,[(r(!0),c(D,null,B(b.value,s=>(r(),c("li",{key:s.host_id,class:"px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:M=>ee(s)},n(s.host_name),9,Oe))),128))])])):p("",!0)])]),e("div",Ze,[i(v,{for:"name",value:"check_in_time"}),i(f,{id:"check_in_time",type:"time",modelValue:a(t).check_in_time,"onUpdate:modelValue":l[4]||(l[4]=s=>a(t).check_in_time=s),required:"",autofocus:"",placeholder:"Sales",autocomplete:"off"},null,8,["modelValue"])]),e("div",Ye,[i(v,{for:"name",value:"Check out at"}),i(f,{id:"check_out_time",type:"time",modelValue:a(t).check_out_time,"onUpdate:modelValue":l[5]||(l[5]=s=>a(t).check_out_time=s),required:"",autofocus:"",placeholder:"Sales",autocomplete:"off"},null,8,["modelValue"])]),e("div",Ge,[i(v,{for:"name",value:"Purpose"}),i(f,{id:"purpose",type:"text",modelValue:a(t).purpose,"onUpdate:modelValue":l[6]||(l[6]=s=>a(t).purpose=s),required:"",autofocus:"",placeholder:"Sales",autocomplete:"off"},null,8,["modelValue"])]),e("div",Je,[i(v,{for:"name",value:"Status"}),i(f,{id:"status",type:"text",modelValue:a(t).status,"onUpdate:modelValue":l[7]||(l[7]=s=>a(t).status=s),required:"",autofocus:"",placeholder:"Sales",autocomplete:"off"},null,8,["modelValue"])])])]),e("div",Ke,[_.value?p("",!0):(r(),he(G,{key:0,onClick:ne,class:S(["text-center",{"opacity-25":a(t).processing}]),disabled:a(t).processing},{default:N(()=>[u(" Create ")]),_:1},8,["class","disabled"])),A(i(G,{onClick:ie,class:S(["text-center",{"opacity-25":a(t).processing}]),disabled:a(t).processing},{default:N(()=>[u(" Update ")]),_:1},8,["class","disabled"]),[[j,_.value]]),e("button",{onClick:P,type:"button",class:"ms-3 text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600"},"Cancel")])])])],2),e("div",null,[i(pe,{"show-modal":C.value,message:J.value,"confirm-button-text":K.value,"cancel-button-text":Q.value,"confirm-action":oe,"close-modal":ae},null,8,["show-modal","message","confirm-button-text","cancel-button-text"])])])]),e("table",Qe,[Re,e("tbody",null,[(r(!0),c(D,null,B($.visits,s=>(r(),c("tr",{key:s.visit_id,class:"bg-white border-b hover:bg-gray-50",onClick:M=>te(s)},[Xe,e("td",et,n(s.visitor_name),1),e("td",tt,n(s.host_name),1),e("td",st,n(s.check_in_time),1),e("td",ot,n(s.check_out_time),1),e("td",lt,n(s.purpose),1),e("td",at,n(s.status),1),e("td",nt,[e("a",{href:"#",onClick:Y(M=>de(s),["stop"]),class:"font-medium text-blue-600 hover:underline"},"Edit",8,it),u(" / "),e("a",{href:"#",onClick:Y(M=>(le(s),console.log(H.value.valueOf)),["stop"]),class:"font-medium text-red-600 hover:underline"},"Delete",8,dt)])],8,We))),128))])]),A(e("div",rt,null,512),[[j,g.value]]),e("div",{class:S([{hidden:!g.value},"overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full flex"]),"aria-modal":"true",role:"dialog"},[e("div",ct,[e("div",ut,[e("button",{onClick:se,type:"button",class:"absolute inline-flex items-center justify-center w-8 h-8 text-sm text-gray-400 bg-transparent rounded-lg top-1 right-1 hover:bg-gray-200 hover:text-gray-900 ms-auto dark:hover:bg-gray-600 dark:hover:text-white"},_t),e("table",pt,[vt,e("tbody",null,[g.value?(r(),c("tr",ft,[e("td",xt,[e("div",null,[gt,u(" "+n((U=x.value)==null?void 0:U.full_name),1)]),e("div",null,[yt,u(" "+n((z=x.value)==null?void 0:z.email),1)]),e("div",null,[bt,u(" "+n((I=x.value)==null?void 0:I.company),1)]),e("div",null,[wt,u(" "+n((E=x.value)==null?void 0:E.phone_number),1)])]),e("td",kt,[e("div",null,[Vt,u(" "+n((F=h.value)==null?void 0:F.host_name),1)]),e("div",null,[Ct,u(" "+n((L=h.value)==null?void 0:L.host_email),1)]),e("div",null,[Ht,u(" "+n((T=h.value)==null?void 0:T.host_phone),1)]),e("div",null,[Mt,u(" "+n((O=h.value)==null?void 0:O.host_position),1)]),e("div",null,[Nt,u(" "+n((Z=h.value)==null?void 0:Z.host_department),1)])])])):p("",!0)])])])])],2)])])])])]}),_:1})],64))}});export{$t as default};
